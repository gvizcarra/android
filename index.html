<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script>
//add listener when device ready
	document.addEventListener("deviceready", onDeviceReady, false);
	var db = window.openDatabase("MisServicios", "1.0", "Mis Servicios", 200000); //will create database Dummy_DB or open it

	//function will be called when device ready
	function onDeviceReady(){
        db.transaction(populateDB, errorCB, successCB);
	}

	//create table and insert some record
	function populateDB(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS Servicios (id INTEGER PRIMARY KEY AUTOINCREMENT,rpu TEXT NOT NULL, cve_cuenta TEXT NOT NULL, direccion TEXT NULL,nombreTitular TEXT NULL,medidor TEXT NULL,tarifa TEXT NULL)');
        
		tx.executeSql('INSERT INTO Servicios (rpu,cve_cuenta,direccion,nombreTitular,medidor,tarifa) VALUES ("016990200185", "69da15a025203160","Fernando Amilpa 1848","Paez Castro Isabel","8416kx","1F")');
        tx.executeSql('INSERT INTO Servicios (rpu,cve_cuenta,direccion,nombreTitular,medidor,tarifa) VALUES ("019940730280", "72da15d029991306","Oaxaca 1372-depto 2","Caballero Lopez Adrian","D16D12","1F")');
    }

	//function will be called when an error occurred
	function errorCB(err) {
        alert("Error processing SQL: "+err.code);
	}

	//function will be called when process succeed
	function successCB() {
        //alert("success!");
        db.transaction(queryDB,errorCB);
    }

	//select all from SoccerPlayer
	function queryDB(tx){
		tx.executeSql('SELECT * FROM Servicios',[],querySuccess,errorCB);
	}

	function querySuccess(tx,result){
		$('#MisServiciosList').empty();
		$.each(result.rows,function(index){
			var row = result.rows.item(index);
			$('#MisServiciosList').append('<li><a href="#"'+row["rpu"]+'><h3 class="ui-li-heading">'+row['nombreTitular']+'</h3><p class="ui-li-desc">Direccion '+row['direccion']+'</p><p class="ui-li-desc">RPU '+row['rpu']+'</p><p class="ui-li-desc">Cuenta '+row['cve_cuenta']+'</p><p class="ui-li-desc">Medidor '+row['medidor']+'</p><p class="ui-li-desc">Tarifa '+row['tarifa']+'</p></a></li>');
		});

		$('#MisServiciosList').listview();
	}

</script>

</head>
<body>

<div data-role="page">
  <div data-role="header" data-position="fixed" data-theme="b">
    <h1>Mis Servicios</h1>
  </div>
  <div data-role="content">
     <ul id="MisServiciosList">
    </ul>
  </div>
</div>
<!--end of Soccer Player Page--->
</body>
</html>
